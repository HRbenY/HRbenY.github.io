---
Author: Spa-Master
日期: 2026年1月17日
tags:
- cpp
- cycle-detection
title: Floyd判圈法(寻找重复数)
---

类似lc142环形链表。
### 1. 核心思维转换

将数组抽象为**链表（图）**：

- **节点**：数组下标 `i`。
    
- **指针**：数组的值 `nums[i]`。
    
- **规则**：`i` 指向 `nums[i]`。
    
- **结论**：因为有重复数，意味着**有两个不同的下标指向同一个值**，这在图中形成了一个**环**。且这个被多次指向的值，就是**环的入口**。
    

### 2. 算法流程 (双指针法)

该算法分为两个明确的阶段：

#### **Phase 1：快慢指针找相遇点**

- **操作**：`slow` 走 1 步，`fast` 走 2 步。
    
- **目的**：确认环的存在，并让双指针在环内相遇。
    
- **终止条件**：`slow == fast`。
    

#### **Phase 2：同步指针找入口 (Answer)**

- **操作**：
    
    1. `slow` 重置回起点 `0`。
        
    2. `fast` 保持在刚才的相遇点不变。
        
    3. 两个指针**每次都走 1 步**。
        
- **目的**：找到环的入口节点。
    
- **终止条件**：`slow == fast` (再次相遇的位置即为重复数)。
    

### 3. 为什么 Phase 2 能找到入口？(数学原理)

假设：

- 起点到环入口距离为 **$x$**。
    
- 环入口到相遇点距离为 **$y$**。
    
- 环的剩余长度为 **$z$**。
    
- 也就是：环的总长度 $L = y + z$。
    

**推导**：

1. 快指针路程是慢指针的 2 倍：
    
    $2(x + y) = x + y + n \cdot L$ (快指针多跑了 n 圈)
    
2. 化简消去 $(x+y)$：
    
    $x + y = n \cdot L$
    
3. 移项求 $x$：
    
    $x = n \cdot L - y$
    
    $x = (n-1) \cdot L + (L - y)$
    
    $x = (n-1) \cdot L + z$
    

总结：

“起点到入口的距离 ($x$)” 恰好等于 “相遇点继续往前走回到入口的距离 ($z$)” (忽略跑在这个过程中的整圈数)。

所以，一个从头走，一个从相遇点走，只要每次一步，必在入口相遇。
